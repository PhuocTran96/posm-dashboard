<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display Management - Menu</title>
    <link rel="stylesheet" href="styles-admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- Navigation -->
        <nav class="admin-nav">
            <div class="nav-brand">
                <h1>üìä Menu</h1>
            </div>
            <div class="nav-menu">
                <a href="survey-results.html" class="nav-item">
                    üìã K·∫øt qu·∫£ kh·∫£o s√°t
                </a>
                <a href="data-upload.html" class="nav-item">
                    üì§ Qu·∫£n l√Ω d·ªØ li·ªáu
                </a>
                <a href="user-management.html" class="nav-item">
                    üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng
                </a>
                <a href="store-management.html" class="nav-item">
                    üè™ Qu·∫£n l√Ω c·ª≠a h√†ng
                </a>
                <a href="display-management.html" class="nav-item active">
                    üñ•Ô∏è Qu·∫£n l√Ω Display
                </a>
            </div>
            <div class="nav-mobile-toggle" id="navMobileToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>

        <!-- Page Header -->
        <div class="page-header">
            <div class="page-header-content">
                <h1>üñ•Ô∏è Qu·∫£n l√Ω Display</h1>
                <p>Qu·∫£n l√Ω tr·∫°ng th√°i hi·ªÉn th·ªã c·ªßa c√°c model POSM t·∫°i c√°c c·ª≠a h√†ng</p>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-container" id="displayStatsContainer">
            <!-- Stats will be loaded here -->
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="addDisplayBtn" class="btn btn-primary">
                ‚ûï Th√™m Display
            </button>
            <button id="importDisplayBtn" class="btn btn-secondary">
                üì§ Import CSV
            </button>
            <button id="exportDisplayBtn" class="btn btn-green">
                üì• Export Excel
            </button>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <label>Store ID:</label>
                <input type="text" id="storeIdFilter" placeholder="T√¨m theo Store ID">
            </div>
            <div class="filter-group">
                <label>Model:</label>
                <input type="text" id="modelFilter" placeholder="T√¨m theo Model">
            </div>
            <div class="filter-group">
                <label>Tr·∫°ng th√°i:</label>
                <select id="displayStatusFilter">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="true">ƒêang hi·ªÉn th·ªã</option>
                    <option value="false">·∫®n</option>
                </select>
            </div>
            <div class="filter-group">
                <label>T√¨m ki·∫øm:</label>
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm t·ªïng qu√°t">
            </div>
            <div class="filter-group">
                <label>&nbsp;</label>
                <button id="clearFiltersBtn" class="btn btn-secondary">X√≥a b·ªô l·ªçc</button>
            </div>
        </div>

        <!-- Bulk Actions -->
        <div class="bulk-actions">
            <button id="selectAllDisplaysBtn" class="btn btn-secondary" type="button">
                ‚òëÔ∏è Ch·ªçn t·∫•t c·∫£
            </button>
            <button id="bulkShowBtn" class="btn btn-green" disabled>
                üëÅÔ∏è Hi·ªÉn th·ªã ƒë√£ ch·ªçn
            </button>
            <button id="bulkHideBtn" class="btn btn-orange" disabled>
                üôà ·∫®n ƒë√£ ch·ªçn
            </button>
            <button id="bulkDeleteBtn" class="btn btn-danger" disabled>
                üóëÔ∏è X√≥a ƒë√£ ch·ªçn
            </button>
        </div>

        <!-- Displays Table -->
        <div class="displays-container" id="displaysContainer">
            <!-- Displays will be loaded here -->
        </div>

        <!-- Pagination -->
        <div class="pagination-container" id="paginationContainer">
            <!-- Pagination will be loaded here -->
        </div>
    </div>

    <!-- Add/Edit Display Modal -->
    <div id="displayModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="displayModalTitle">Th√™m Display M·ªõi</h3>
                <span class="close" id="closeDisplayModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="displayForm">
                    <input type="hidden" id="displayId">
                    
                    <div class="form-group">
                        <label for="storeIdInput">Store ID *</label>
                        <input type="text" id="storeIdInput" name="store_id" required 
                               placeholder="Nh·∫≠p Store ID">
                    </div>

                    <div class="form-group">
                        <label for="modelInput">Model *</label>
                        <input type="text" id="modelInput" name="model" required 
                               placeholder="Nh·∫≠p Model">
                    </div>

                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="isDisplayedInput" name="is_displayed" checked>
                            <span class="checkmark"></span>
                            ƒêang hi·ªÉn th·ªã
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDisplayBtn">H·ªßy</button>
                <button type="button" class="btn btn-primary" id="saveDisplayBtn">L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üì• Import Display Records</h3>
                <span class="close" id="closeImportModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="import-instructions">
                    <h4>H∆∞·ªõng d·∫´n import:</h4>
                    <ul>
                        <li>File CSV/Excel ph·∫£i c√≥ c√°c c·ªôt: <strong>store_id, model, is_displayed</strong></li>
                        <li><strong>is_displayed</strong>: 1 = hi·ªÉn th·ªã, 0 = ·∫©n</li>
                        <li>K√≠ch th∆∞·ªõc file t·ªëi ƒëa: 10MB</li>
                        <li>C√°c b·∫£n ghi tr√πng l·∫∑p (c√πng store_id v√† model) s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t</li>
                    </ul>
                </div>
                
                <div class="file-upload-area" id="fileUploadArea">
                    <div class="file-upload-content">
                        <div class="file-upload-icon">üìÑ</div>
                        <p>K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c</p>
                        <button type="button" class="btn btn-outline" id="selectFileBtn">Ch·ªçn file</button>
                        <p class="file-format-hint">H·ªó tr·ª£: CSV, XLSX, XLS</p>
                    </div>
                </div>

                <div class="selected-file-info" id="selectedFileInfo" style="display: none;">
                    <div class="file-info">
                        <span class="file-icon">üìÑ</span>
                        <span id="selectedFileName" class="file-name"></span>
                        <span id="selectedFileSize" class="file-size"></span>
                    </div>
                    <button type="button" class="btn btn-sm btn-danger" id="removeFileBtn">‚úï</button>
                </div>

                <input type="file" id="csvFileInput" accept=".csv,.xlsx,.xls" style="display: none;">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelImportBtn">H·ªßy</button>
                <button type="button" class="btn btn-primary" id="startImportBtn" disabled>Import</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>‚ö†Ô∏è X√°c nh·∫≠n x√≥a</h3>
                <span class="close" id="closeDeleteModal">&times;</span>
            </div>
            <div class="modal-body">
                <p id="deleteMessage">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a b·∫£n ghi display n√†y?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">H·ªßy</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">X√≥a</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>ƒêang x·ª≠ l√Ω...</p>
    </div>

    <!-- Scripts -->
    <script src="pagination-component.js"></script>
    <script src="display-management.js"></script>
    <script>
        // Initialize display management when page loads
        document.addEventListener('DOMContentLoaded', () => {
            displayManager = new DisplayManagement();
        });
        
        // Mobile navigation toggle
        document.getElementById('navMobileToggle').addEventListener('click', function() {
            const navMenu = document.querySelector('.nav-menu');
            navMenu.classList.toggle('active');
        });
    </script>
</body>
</html>