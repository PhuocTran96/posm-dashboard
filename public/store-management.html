<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Store Management - Menu</title>
    <link rel="stylesheet" href="styles-admin.css" />
  </head>
  <body>
    <div class="admin-container">
      <!-- Navigation -->
      <nav class="admin-nav">
        <div class="nav-brand">
          <h1>üìä Menu</h1>
        </div>
        <div class="nav-menu">
          <a href="survey-results.html" class="nav-item" title="K·∫øt qu·∫£ kh·∫£o s√°t"> üìã </a>
          <a href="data-upload.html" class="nav-item" title="Qu·∫£n l√Ω d·ªØ li·ªáu"> üì§ </a>
          <a href="user-management.html" class="nav-item" title="Qu·∫£n l√Ω ng∆∞·ªùi d√πng"> üë• </a>
          <a href="store-management.html" class="nav-item active" title="Qu·∫£n l√Ω c·ª≠a h√†ng"> üè™ </a>
          <a href="display-management.html" class="nav-item" title="Qu·∫£n l√Ω Display"> üñ•Ô∏è </a>
          <a href="#" id="logout-btn" class="nav-item logout-btn" title="ƒêƒÉng xu·∫•t"> üö™ </a>
        </div>
        <div class="nav-mobile-toggle" id="navMobileToggle">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </nav>

      <!-- Page Header -->
      <div class="page-header">
        <div class="page-header-content">
          <h1>üè™ Qu·∫£n l√Ω c·ª≠a h√†ng</h1>
          <p>Qu·∫£n l√Ω th√¥ng tin c·ª≠a h√†ng, k√™nh ph√¢n ph·ªëi v√† import/export d·ªØ li·ªáu</p>
        </div>
      </div>

      <!-- Statistics -->
      <div class="stats-container" id="storeStatsContainer">
        <!-- Stats will be loaded here -->
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="addStoreBtn" class="btn btn-primary">‚ûï Th√™m c·ª≠a h√†ng</button>
        <button id="importStoresBtn" class="btn btn-secondary">üì§ Import CSV</button>
        <button id="exportStoresBtn" class="btn btn-green">üì• Export CSV</button>
      </div>

      <!-- Filters -->
      <div class="filters">
        <div class="filter-group">
          <label>K√™nh:</label>
          <select id="channelFilter">
            <option value="">T·∫•t c·∫£ k√™nh</option>
          </select>
        </div>
        <div class="filter-group">
          <label>V√πng mi·ªÅn:</label>
          <select id="regionFilter">
            <option value="">T·∫•t c·∫£ v√πng</option>
          </select>
        </div>
        <div class="filter-group">
          <label>T·ªânh/TP:</label>
          <select id="provinceFilter">
            <option value="">T·∫•t c·∫£ t·ªânh</option>
          </select>
        </div>
        <div class="filter-group">
          <label>MCP:</label>
          <select id="mcpFilter">
            <option value="">T·∫•t c·∫£</option>
            <option value="Y">C√≥</option>
            <option value="N">Kh√¥ng</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Tr·∫°ng th√°i:</label>
          <select id="statusFilter">
            <option value="">T·∫•t c·∫£</option>
            <option value="active">Ho·∫°t ƒë·ªông</option>
            <option value="inactive">Ng∆∞ng ho·∫°t ƒë·ªông</option>
          </select>
        </div>
        <div class="filter-group">
          <label>T√¨m ki·∫øm:</label>
          <input type="text" id="searchInput" placeholder="ID, Code, T√™n c·ª≠a h√†ng..." />
        </div>
        <div class="filter-group">
          <label>&nbsp;</label>
          <button id="clearFiltersBtn" class="btn btn-secondary">X√≥a b·ªô l·ªçc</button>
        </div>
      </div>

      <!-- Bulk Actions -->
      <div class="bulk-actions">
        <button id="selectAllStoresBtn" class="btn btn-secondary" type="button">
          ‚òëÔ∏è Ch·ªçn t·∫•t c·∫£
        </button>
        <button id="bulkActivateBtn" class="btn btn-green" disabled>‚úÖ K√≠ch ho·∫°t</button>
        <button id="bulkDeactivateBtn" class="btn btn-orange" disabled>‚ùå T·∫°m d·ª´ng</button>
        <button id="bulkDeleteStoresBtn" class="btn btn-danger" disabled>üóëÔ∏è X√≥a</button>
      </div>

      <!-- Stores Table -->
      <div class="stores-container" id="storesContainer">
        <!-- Stores will be loaded here -->
      </div>

      <!-- Pagination -->
      <div class="pagination-container" id="storesPaginationContainer">
        <!-- Pagination will be loaded here -->
      </div>

      <!-- Loading overlay -->
      <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
      </div>

      <!-- Add/Edit Store Modal -->
      <div id="storeModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="modalTitle">Th√™m c·ª≠a h√†ng m·ªõi</h3>
            <button id="closeModalBtn" class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <form id="storeForm">
              <input type="hidden" id="storeId" name="storeId" />

              <div class="form-grid">
                <div class="form-group">
                  <label for="store_id">Store ID <span class="required">*</span></label>
                  <input type="text" id="store_id" name="store_id" required />
                </div>

                <div class="form-group">
                  <label for="store_code">Store Code</label>
                  <input type="text" id="store_code" name="store_code" />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group">
                  <label for="store_name">T√™n c·ª≠a h√†ng <span class="required">*</span></label>
                  <input type="text" id="store_name" name="store_name" required />
                </div>

                <div class="form-group">
                  <label for="channel">K√™nh <span class="required">*</span></label>
                  <input type="text" id="channel" name="channel" required />
                </div>
              </div>

              <div class="form-grid-three">
                <div class="form-group">
                  <label for="hc">HC <span class="required">*</span></label>
                  <input type="number" id="hc" name="hc" min="0" required />
                </div>

                <div class="form-group">
                  <label for="region">V√πng mi·ªÅn <span class="required">*</span></label>
                  <select id="region" name="region" required>
                    <option value="">Ch·ªçn v√πng mi·ªÅn</option>
                    <option value="North">North</option>
                    <option value="Central">Central</option>
                    <option value="South">South</option>
                    <option value="Mekong">Mekong</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="province">T·ªânh/TP <span class="required">*</span></label>
                  <input type="text" id="province" name="province" required />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group">
                  <label for="mcp">MCP <span class="required">*</span></label>
                  <select id="mcp" name="mcp" required>
                    <option value="">Ch·ªçn MCP</option>
                    <option value="Y">C√≥</option>
                    <option value="N">Kh√¥ng</option>
                  </select>
                </div>

                <div class="form-group">
                  <label>
                    <input type="checkbox" id="isActive" name="isActive" checked />
                    C·ª≠a h√†ng ho·∫°t ƒë·ªông
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button id="saveStoreBtn" class="btn btn-primary">L∆∞u</button>
            <button id="cancelStoreBtn" class="btn btn-secondary">H·ªßy</button>
          </div>
        </div>
      </div>

      <!-- Import CSV Modal -->
      <div id="importModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Import c·ª≠a h√†ng t·ª´ CSV</h3>
            <button id="closeImportModalBtn" class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="import-info">
              <h4>ƒê·ªãnh d·∫°ng file CSV:</h4>
              <p>File CSV c·∫ßn c√≥ c√°c c·ªôt sau (h√†ng ƒë·∫ßu ti√™n l√† header):</p>
              <code>store_id,store_code,store_name,channel,hc,region,province,mcp</code>

              <h4>V√≠ d·ª•:</h4>
              <pre>
store_id,store_code,store_name,channel,hc,region,province,mcp
52004937,null,Cao Phong Binh Tan 2,Cao Phong,1,South,Ho Chi Minh,Y
52004936,H012,Cao Phong Binh Tan,Cao Phong,1,South,Ho Chi Minh,Y</pre
              >

              <div class="import-notes">
                <strong>L∆∞u √Ω:</strong>
                <ul>
                  <li>File t·ªëi ƒëa 5MB</li>
                  <li>Ch·ªâ h·ªó tr·ª£ ƒë·ªãnh d·∫°ng .csv, .xlsx, .xls</li>
                  <li>N·∫øu store_id ƒë√£ t·ªìn t·∫°i, th√¥ng tin s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t</li>
                  <li>MCP: Y (c√≥) ho·∫∑c N (kh√¥ng)</li>
                  <li>HC: s·ªë nguy√™n kh√¥ng √¢m</li>
                </ul>
              </div>
            </div>

            <div class="file-upload-area">
              <input type="file" id="csvFileInput" accept=".csv,.xlsx,.xls" style="display: none" />
              <div class="file-drop-zone" id="fileDropZone">
                <div class="file-drop-content">
                  <div class="file-drop-icon">üìÑ</div>
                  <div class="file-drop-text">
                    <p><strong>K√©o th·∫£ file CSV v√†o ƒë√¢y</strong></p>
                    <p>
                      ho·∫∑c
                      <button type="button" id="selectFileBtn" class="btn-link">ch·ªçn file</button>
                    </p>
                  </div>
                </div>
              </div>
              <div id="selectedFileInfo" class="selected-file-info" style="display: none">
                <span id="selectedFileName"></span>
                <button type="button" id="removeFileBtn" class="btn-remove">√ó</button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="importBtn" class="btn btn-primary" disabled>Import</button>
            <button id="cancelImportBtn" class="btn btn-secondary">H·ªßy</button>
          </div>
        </div>
      </div>

      <!-- Confirm delete dialog -->
      <div id="confirmDeleteDialog" class="confirm-dialog">
        <div class="confirm-content">
          <h3>X√°c nh·∫≠n x√≥a</h3>
          <p id="deleteConfirmText">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a c·ª≠a h√†ng n√†y?</p>
          <div class="confirm-buttons">
            <button id="btnConfirmDelete" class="btn-confirm">X√≥a</button>
            <button id="btnCancelDelete" class="btn-cancel">H·ªßy</button>
          </div>
        </div>
      </div>
    </div>

    <script src="pagination-component.js"></script>
    <script src="store-management.js"></script>
    <script src="admin.js"></script>
  </body>
</html>
